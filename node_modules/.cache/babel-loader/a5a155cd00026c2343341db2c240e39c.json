{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bozda/Desktop/bureau OpenClassRooms/Openclassrooms/p7 oc/P7-Kasa-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bozda/Desktop/bureau OpenClassRooms/Openclassrooms/p7 oc/P7-Kasa-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/bozda/Desktop/bureau OpenClassRooms/Openclassrooms/p7 oc/P7-Kasa-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import Carrousel from\"../../components/Carrousel/Carrousel\";import Collapse from\"../../components/Collapse/Collapse\";import Host from\"../../components/Host/Host\";import Rate from\"../../components/Rate/Rate\";import Tag from\"../../components/Tag/Tag\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FicheLogement(){var params=useParams();var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),pickedAppart=_useState2[0],setPickedAppart=_useState2[1];useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,picked;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/logements.json\");case 2:res=_context.sent;//j'ai préféré utiliser une requète AXIOS pour être prêt à la future mise en place de l'API\nconsole.log(res);picked=res.data.find(function(_ref2){var id=_ref2.id;return id===params.id;});console.log(picked);res.data.map(function(){return setPickedAppart(picked);});if(picked===undefined){navigate(\"/404\",{state:{message:\"Can't get data\"}});//renvoi vers la page 404 en cas d'URL de logement invalide\n}case 8:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();// eslint-disable-next-line\n},[]);// array vide du useEffect pour ne lancer qu'une seule fois\nvar slidePics=pickedAppart&&pickedAppart.pictures;var tags=pickedAppart&&pickedAppart.tags;var equipments=pickedAppart&&pickedAppart.equipments;var equip=pickedAppart&&equipments.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{className:\"equipList\",children:item},index);});console.log(equip);return pickedAppart&&/*#__PURE__*/_jsxs(\"div\",{className:\"fiche-container\",children:[/*#__PURE__*/_jsx(Carrousel,{slides:slidePics}),/*#__PURE__*/_jsxs(\"section\",{className:\"hostInfo-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-tags-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-container redFont\",children:[/*#__PURE__*/_jsx(\"h1\",{children:pickedAppart.title}),/*#__PURE__*/_jsx(\"h3\",{children:pickedAppart.location})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tags-container\",children:tags.map(function(tag){return/*#__PURE__*/_jsx(Tag,{tag:tag},tag);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate-host-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"host-container redFont\",children:/*#__PURE__*/_jsx(Host,{hostName:pickedAppart.host.name,hostPic:pickedAppart.host.picture})}),/*#__PURE__*/_jsx(\"div\",{className:\"rate-container\",children:/*#__PURE__*/_jsx(Rate,{score:pickedAppart.rating})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-fiche-container\",children:[/*#__PURE__*/_jsx(Collapse,{aboutTitle:\"Description\",aboutText:pickedAppart.description}),/*#__PURE__*/_jsx(Collapse,{aboutTitle:\"\\xC9quipements\",aboutText:equip})]})]},params.id);}","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","Carrousel","Collapse","Host","Rate","Tag","axios","FicheLogement","params","navigate","pickedAppart","setPickedAppart","getData","get","res","console","log","picked","data","find","id","map","undefined","state","message","slidePics","pictures","tags","equipments","equip","item","index","title","location","tag","host","name","picture","rating","description"],"sources":["C:/Users/bozda/Desktop/bureau OpenClassRooms/Openclassrooms/p7 oc/P7-Kasa-main/src/pages/FicheLogement/FicheLogement.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport Carrousel from \"../../components/Carrousel/Carrousel\";\nimport Collapse from \"../../components/Collapse/Collapse\";\nimport Host from \"../../components/Host/Host\";\nimport Rate from \"../../components/Rate/Rate\";\nimport Tag from \"../../components/Tag/Tag\";\nimport axios from \"axios\";\n\nexport default function FicheLogement() {\n\tconst params = useParams();\n\tconst navigate = useNavigate();\n\n\tconst [pickedAppart, setPickedAppart] = useState();\n\tuseEffect(() => {\n\t\tconst getData = async () => {\n\t\t\tconst res = await axios.get(\"/logements.json\"); //j'ai préféré utiliser une requète AXIOS pour être prêt à la future mise en place de l'API\n\t\t\tconsole.log(res);\n\t\t\tconst picked = res.data.find(({ id }) => id === params.id);\n\t\t\tconsole.log(picked);\n\t\t\tres.data.map(() => setPickedAppart(picked));\n\t\t\tif (picked === undefined) {\n\t\t\t\tnavigate(\"/404\", { state: { message: \"Can't get data\" } }); //renvoi vers la page 404 en cas d'URL de logement invalide\n\t\t\t}\n\t\t};\n\t\tgetData();\n\n\t\t// eslint-disable-next-line\n\t}, []); // array vide du useEffect pour ne lancer qu'une seule fois\n\tconst slidePics = pickedAppart && pickedAppart.pictures;\n\t\n\tconst tags = pickedAppart && pickedAppart.tags;\n\tconst equipments = pickedAppart && pickedAppart.equipments;\n\n\n\tconst equip =\n\t\tpickedAppart &&\n\t\tequipments.map((item, index) => (\n\t\t\t<li key={index} className=\"equipList\">\n\t\t\t\t{item}\n\t\t\t</li>\n\t\t));\n\n\t\tconsole.log(equip);\n\n\treturn (\n\t\tpickedAppart && (\n\t\t\t<div key={params.id} className=\"fiche-container\">\n\t\t\t\t<Carrousel slides={slidePics} />\n\t\t\t\t<section className=\"hostInfo-container\">\n\t\t\t\t\t<div className=\"title-tags-container\">\n\t\t\t\t\t\t<div className=\"title-container redFont\">\n\t\t\t\t\t\t\t<h1>{pickedAppart.title}</h1>\n\t\t\t\t\t\t\t<h3>{pickedAppart.location}</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"tags-container\">\n\t\t\t\t\t\t\t{tags.map((tag) => (\n\t\t\t\t\t\t\t\t<Tag key={tag} tag={tag} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"rate-host-container\">\n\t\t\t\t\t\t<div className=\"host-container redFont\">\n\t\t\t\t\t\t\t<Host\n\t\t\t\t\t\t\t\thostName={pickedAppart.host.name}\n\t\t\t\t\t\t\t\thostPic={pickedAppart.host.picture}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"rate-container\">\n\t\t\t\t\t\t\t<Rate score={pickedAppart.rating} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t\t<div className=\"collapse-fiche-container\">\n\t\t\t\t\t<Collapse\n\t\t\t\t\t\taboutTitle=\"Description\"\n\t\t\t\t\t\taboutText={pickedAppart.description}\n\t\t\t\t\t/>\n\t\t\t\t\t<Collapse aboutTitle=\"Équipements\" aboutText={equip} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}